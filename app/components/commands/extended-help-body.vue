<template>
	<VueMarkdown :source="processedBody" :plugins="plugins" :options="markdownOptions" />
</template>

<script setup lang="ts">
import { EmojiRegexExtractName } from '@/utils/constants';
import MarkdownItAnchor from 'markdown-it-anchor';
import VueMarkdown from 'vue-markdown-render';

interface ExtendedHelpBodyProps {
	body: string;
}

const props = defineProps<ExtendedHelpBodyProps>();

// Plugin markdown-it-anchor
const plugins = [MarkdownItAnchor];

// Opzioni di configurazione markdown
const markdownOptions = {
	html: true,
	linkify: true,
	typographer: true
};

const processedBody = computed(() => {
	return props.body.replace(EmojiRegexExtractName, '$1');
});
</script>

<style scoped>
@reference "@/assets/css/main.css";
:deep(.markdown-body) {
	@apply prose prose-stone max-w-none;
}
:deep(a) {
	@apply link link-primary;
}
:deep(code) {
	@apply rounded-sm bg-base-200 px-1 py-0.5;
}
</style>
